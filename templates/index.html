<!DOCTYPE html>
<html lang="en" >
  <head>
  <meta charset="UTF-8">
  <title>Scene Status</title>
  <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
  <style type="text/css">
  body {
    background-color: #000000;
    color: #fff;
    font-family: "Open Sans", sans;
    font-size: 10vw;
  }
  * {
    box-sizing: border-box;
  }
  /* Create three equal columns that floats next to each other */
.column {
  float: left;
  width: 33.33%;
  padding: 10px;
  min-height: 10vh;
  text-align: center;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Responsive layout - makes the three columns stack on top of each other instead of next to each other */
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
    font-size: 10vh;
  }
}
  </style>
  </head>
  <body>
    <div class="row">
  <div class="column">ACT <br><span id="act">{{ data.a|e }}</span></div>
  <div class="column">SCENE <br><span id="scene">{{ data.s|e }}</span></div>
  <div class="column">PAGE <br><span id="page">{{ data.p|e }}</span></div>
  </div>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(event) {

      function poll() {
        fetchAndUpdate();
        interval = window.setTimeout(poll, 1000);
      }

      function update(response) {
        console.log(response);
        document.getElementById('act').innerHTML = response.a;
        document.getElementById('scene').innerHTML = response.s;
        document.getElementById('page').innerHTML = response.p;
      }

      async function fetchAndUpdate() {
          url = 'json'
          const response = await fetch(url, {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json'
              },
          })
          .then(response => response.json())
          .then(response => update(response));
      }

      window.setTimeout(poll, 1000);
    });
  </script>
  </body>
</html>